<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>





    <!-- Include jQuery -->
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->

    <!-- Include Bootstrap JS (3.3.7) -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->

    <!-- Include MDB JS (6.4.2) -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.js"></script> -->


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

</head>
<body>

    <header>
        <!-- Jumbotron -->
        <div class="p-3 text-center bg-white border-bottom">
          <div class="container">
            <div class="d-flex justify-content-between">
              <!-- Left elements -->
              <div class="">
                <a href="https://mdbootstrap.com/" target="_blank" class="">
                  <img src="https://mdbootstrap.com/img/logo/mdb-transaprent-noshadows.png" height="35" />
                </a>
              </div>
              <!-- Left elements -->

              <!-- right elements -->
              <div class="">
                <a href="https://github.com/mdbootstrap/bootstrap-material-design" class="me-1 border rounded py-1 px-3 nav-link" target="_blank"> <i class="fas fa-user-alt me-2"></i>Sign in </a>
              </div>
              <!-- right elements -->
            </div>
          </div>
        </div>
        <!-- Jumbotron -->

        <!-- Heading -->
        <div class="bg-primary">
          <div class="container py-4">
            <!-- Breadcrumb -->
            <nav class="d-flex">
              <h6 class="mb-0">
                <a href="" class="text-white-50">Home</a>
                <span class="text-white-50 mx-2"> > </span>
                <a href="" class="text-white-50">2. Shopping cart</a>
                <span class="text-white-50 mx-2"> > </span>
                <a href="" class="text-white"><u>3. Order info</u></a>
                <span class="text-white-50 mx-2"> > </span>
                <a href="" class="text-white-50">4. Payment</a>
              </h6>
            </nav>
            <!-- Breadcrumb -->
          </div>
        </div>
        <!-- Heading -->
      </header>

      <section class="bg-light py-5">
        <div class="container">
          <div class="row">
            <div class="col-xl-8 col-lg-8 mb-4">
              <div class="card mb-4 border shadow-0">
                <div class="p-4 d-flex justify-content-between">
                  <div class="">
                    <h5>Have an account?</h5>
                    <p class="mb-0 text-wrap ">Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
                  </div>
                  <div class="d-flex align-items-center justify-content-center flex-column flex-md-row">
                    <a href="#" class="btn btn-outline-primary me-0 me-md-2 mb-2 mb-md-0 w-100">Register</a>
                    <a href="#" class="btn btn-primary shadow-0 text-nowrap w-100">Sign in</a>
                  </div>
                </div>
              </div>

              <!-- Checkout -->
              <div class="card shadow-0 border">
                <div class="p-4">
                  <h5 class="card-title mb-3">Add Address</h5>
                  <!-- <button type="button" class="btn btn-primary" data-mdb-toggle="modal" data-mdb-target="#exampleModal" data-whatever="@getbootstrap">Open modal for @getbootstrap</button>

                  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <form id="form-data">
                            <div class="mb-3">
                              <label for="Street" class="form-label">Street</label>
                              <input type="text" class="form-control" id="street" name="street">
                            </div>
                            <div class="mb-3">
                              <label for="city" class="form-label">City</label>
                              <input type="text" class="form-control" id="city" name="city">
                            </div>
                            <div class="mb-3">
                              <label for="State" class="form-label">State</label>
                              <input type="text" class="form-control" id="state" name="state">
                            </div>
                            <div class="mb-3">
                              <label for="Pincode" class="form-label"> Pincode</label>
                              <input type="text" class="form-control" id="pincode" name="pincode">
                            </div>
                            <div class="mb-3">
                              <label for="Country" class="form-label">Country</label>
                              <input type="text" class="form-control" id="country" name="country">
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                              <button type="submit" class="btn btn-primary">Send message</button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div> -->

                  <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <form id="form-data">
          <div class="mb-3">
            <label for="Street" class="form-label">Street</label>
            <input type="text" class="form-control" id="street" name="street">
          </div>
          <div class="mb-3">
            <label for="city" class="form-label">City</label>
            <input type="text" class="form-control" id="city" name="city">
          </div>
          <div class="mb-3">
            <label for="State" class="form-label">State</label>
            <input type="text" class="form-control" id="state" name="state">
          </div>
          <div class="mb-3">
            <label for="Pincode" class="form-label"> Pincode</label>
            <input type="text" class="form-control" id="pincode" name="pincode">
          </div>
          <div class="mb-3">
            <label for="Country" class="form-label">Country</label>
            <input type="text" class="form-control" id="country" name="country">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Send message</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>



                  <hr class="my-4" />

                  <h5 class="card-title mb-3"> Address</h5>
                  <% for( let i = 0; i < address.length; i++ ) { %>
                    <div class="row mb-3">
                        <div class="col-lg-4 mb-3">
                          <!-- Default checked radio -->

                            <div class="form-check h-100 border rounded-3">
                              <div class="p-3">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" data-address-id="<%= address[i]._id %>" id="flexRadioDefault1" checked />
                                <label class="form-check-label" for="flexRadioDefault1">
                                      Street:<%= address[i].street %> <br>
                                        City: <%= address[i].city %><br>
                                        State: <%= address[i].state %> <br>
                                        Country: <%= address[i].country %> <br>
                                        Pincode:<%= address[i].pincode  %> <br>
                                </label>
                              </div>
                            </div>


                        </div>
                      </div>

                  <% } %>




                </div>
              </div>
              <!-- Checkout -->
            </div>
            <div class="col-xl-4 col-lg-4 d-flex justify-content-center justify-content-lg-end">
              <div class="ms-lg-4 mt-4 mt-lg-0" style="max-width: 320px;">
                <h6 class="mb-3">Summary</h6>
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Total price:</p>
                  <p class="mb-2">$195.90</p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Discount:</p>
                  <p class="mb-2 text-danger">- $60.00</p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Shipping cost:</p>
                  <p class="mb-2">+ $14.00</p>
                </div>
                <hr />
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Total price:</p>
                  <p class="mb-2 fw-bold">$149.90</p>
                </div>

                <div class="input-group mt-3 mb-4">
                  <input type="text" class="form-control border" name="" placeholder="Promo code" />
                  <button class="btn btn-light text-primary border">Apply</button>
                </div>

                <hr />
                <h6 class="text-dark my-4">Items in cart</h6>

                <% userproduct.forEach(product => { %>
                  <div class="d-flex align-items-center mb-4">
                    <div class="me-3 position-relative">
                      <img src="/uploads/<%= product.productId.productimage %>" style="height: 96px; width: 96x;" class="img-sm rounded border" alt="" >
                    </div>
                    <div class="">
                     <p><%= product.productId.productname %></p>
                     <p><%= product.quantity %></p>
                    </div>
                  </div>

                <% }) %>
                <div class="price text-muted">Total Amount:<%= product.totalPrice %>
                  </div>
                <div class="mb-3">
                  <label for="paymentMethod" class="form-label">Payment Method</label>
                  <select class="form-select" id="paymentMethod" name="paymentMethod">
                      <option value="cash">Cash on Delivery</option>
                      <option value="online">Online Payment</option>
                  </select>
              </div>
              <button type="button" id="button" class="btn btn-primary" >Purchase</button>
              </div>
            </div>
          </div>
        </div>

      </section>

      <!-- Footer -->
      <footer class="text-center text-lg-start text-muted bg-primary mt-3">
        <!-- Section: Links  -->
        <section class="">
          <div class="container text-center text-md-start pt-4 pb-4">
            <!-- Grid row -->
            <div class="row mt-3">
              <!-- Grid column -->
              <div class="col-12 col-lg-3 col-sm-12 mb-2">
                <!-- Content -->
                <a href="https://mdbootstrap.com/" target="_blank" class="text-white h2">
                  MDB
                </a>
                <p class="mt-1 text-white">
                  © 2023 Copyright: MDBootstrap.com
                </p>
              </div>
              <!-- Grid column -->

              <!-- Grid column -->
              <div class="col-6 col-sm-4 col-lg-2">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">
                  Store
                </h6>
                <ul class="list-unstyled mb-4">
                  <li><a class="text-white-50" href="#">About us</a></li>
                  <li><a class="text-white-50" href="#">Find store</a></li>
                  <li><a class="text-white-50" href="#">Categories</a></li>
                  <li><a class="text-white-50" href="#">Blogs</a></li>
                </ul>
              </div>
              <!-- Grid column -->

              <!-- Grid column -->
              <div class="col-6 col-sm-4 col-lg-2">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">
                  Information
                </h6>
                <ul class="list-unstyled mb-4">
                  <li><a class="text-white-50" href="#">Help center</a></li>
                  <li><a class="text-white-50" href="#">Money refund</a></li>
                  <li><a class="text-white-50" href="#">Shipping info</a></li>
                  <li><a class="text-white-50" href="#">Refunds</a></li>
                </ul>
              </div>
              <!-- Grid column -->

              <!-- Grid column -->
              <div class="col-6 col-sm-4 col-lg-2">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">
                  Support
                </h6>
                <ul class="list-unstyled mb-4">
                  <li><a class="text-white-50" href="#">Help center</a></li>
                  <li><a class="text-white-50" href="#">Documents</a></li>
                  <li><a class="text-white-50" href="#">Account restore</a></li>
                  <li><a class="text-white-50" href="#">My orders</a></li>
                </ul>
              </div>
              <!-- Grid column -->

              <!-- Grid column -->
              <div class="col-12 col-sm-12 col-lg-3">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">Newsletter</h6>
                <p class="text-white">Stay in touch with latest updates about our products and offers</p>
                <div class="input-group mb-3">
                  <input type="email" class="form-control border" placeholder="Email" aria-label="Email" aria-describedby="button-addon2" />
                  <button class="btn btn-light border shadow-0" type="button" id="button-addon2" data-mdb-ripple-color="dark">
                    Join
                  </button>
                </div>
              </div>
              <!-- Grid column -->
            </div>
            <!-- Grid row -->
          </div>
        </section>
        <!-- Section: Links  -->

        <div class="">
          <div class="container">
            <div class="d-flex justify-content-between py-4 border-top">
              <!--- payment --->
              <div>
                <i class="fab fa-lg fa-cc-visa text-white"></i>
                <i class="fab fa-lg fa-cc-amex text-white"></i>
                <i class="fab fa-lg fa-cc-mastercard text-white"></i>
                <i class="fab fa-lg fa-cc-paypal text-white"></i>
              </div>
              <!--- payment --->

              <!--- language selector --->
              <div class="dropdown dropup">
                <a class="dropdown-toggle text-white" href="#" id="Dropdown" role="button" data-mdb-toggle="dropdown" aria-expanded="false"> <i class="flag-united-kingdom flag m-0 me-1"></i>English </a>

                <ul class="dropdown-menu dropdown-menu-endp" aria-labelledby="Dropdown">
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-united-kingdom flag"></i>English <i class="fa fa-check text-success ms-2"></i></a>
                  </li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-poland flag"></i>Polski</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-china flag"></i>中文</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-japan flag"></i>日本語</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-germany flag"></i>Deutsch</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-france flag"></i>Français</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-spain flag"></i>Español</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-russia flag"></i>Русский</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-portugal flag"></i>Português</a>
                  </li>
                </ul>
              </div>
              <!--- language selector --->
            </div>
          </div>
        </div>
      </footer>
      <!-- Footer -->
      <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script> -->


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>

document.getElementById('form-data').addEventListener('submit',(event)=>{
  event.preventDefault();

  const street = document.getElementById('street').value;
            const city = document.getElementById('city').value;
            const state = document.getElementById('state').value;
            const pincode = document.getElementById('pincode').value;
            const country = document.getElementById('country').value;


const data={
  street:street,
  city:city,
  state:state,
  pincode:pincode,
  country:country
}

fetch('/addaddress',{
  method:'post',
  body:JSON.stringify(data),
  headers: {
        'Content-Type': 'application/json'
      }

}).then((response)=>{
  if(response.ok){
    window.location.reload();
    console.log("sucess");
  }
})
.catch((error)=>{
  console.log("error");
  console.log(error);
})

})


 const paymentMethod=document.getElementById('paymentMethod');
 if(!paymentMethod){
  alert("plz select a payment method")
 }



document.getElementById('button').addEventListener('click', (event) => {
  const addressId = document.querySelector('input[name="flexRadioDefault"]:checked').getAttribute('data-address-id');
  if (!addressId) {
    alert("Please select an address before proceeding.");
  } else {
    // Do something with the selectedAddressId, e.g., send it to your server for processing.

    console.log("Selected Address ID:",addressId );
    fetch(`/addorder/${addressId}`,{
      method:'post'
    }).then((res)=>{
      if(res.ok){
        window.location.href='/ordersucessfull'

      }else{
       console.log("error ocuurred no response")
      }
     
    }).catch((error)=>{
      console.log(error)
    })
  }
});








</script>

</body>
</html>